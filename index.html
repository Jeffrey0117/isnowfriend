<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å‹å–„æ™‚é–“ - ç²¾æº–æŠ˜æ‰£æŸ¥è©¢</title>
    <!-- å¼•å…¥ React, ReactDOM, Babel CDN -->
    <script
      src="https://unpkg.com/react@18/umd/react.production.min.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- å¼•å…¥è‡ªè¨‚ JS æ¨¡çµ„ -->
    <script src="js/api.js"></script>
    <script src="js/location.js"></script>
    <script src="js/ui.js"></script>
    <style>
      /* æ¯›ç»ç’ƒè³ªæ„Ÿ Header - å¼·åŒ–ç‰ˆ */
      .frosted-header {
        margin: 0;
        margin-bottom: 32px;
        min-height: 72px;
        padding: 22px 38px 18px 38px;
        background: rgba(36, 38, 48, 0.92);
        box-shadow: 0 6px 32px rgba(30, 32, 40, 0.18);
        backdrop-filter: blur(18px) saturate(1.7);
        -webkit-backdrop-filter: blur(18px) saturate(1.7);
        border-bottom: 1.5px solid rgba(80, 80, 90, 0.18);
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: flex-start;
        width: 100%;
        border-radius: 0;
        user-select: none;
        transition: background 0.3s;
        box-sizing: border-box;
      }
      .frosted-header .header-logo {
        width: 80px;
        height: 80px;
        min-width: 80px;
        min-height: 80px;
        border-radius: 50%;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.13);
        object-fit: cover;
        margin-right: 28px;
        background: #23242a;
        border: 1.5px solid #444;
        display: block;
      }
      .frosted-header .header-texts {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }
      .frosted-header .header-title {
        font-size: 2.3em;
        font-weight: 700;
        color: #fff;
        letter-spacing: 0.04em;
        margin-bottom: 0.18em;
        text-align: left;
        line-height: 1.1;
        text-shadow: 0 2px 12px rgba(0, 0, 0, 0.13);
      }
      .frosted-header .header-subtitle {
        font-size: 1.13em;
        color: #e0e0e0;
        font-weight: 400;
        letter-spacing: 0.02em;
        text-align: left;
        line-height: 1.5;
        opacity: 0.92;
      }
      @media (max-width: 600px) {
        .frosted-header {
          display: none !important;
        }
      }

      /* content-wrapper å’Œ intro-text æ¨£å¼ */
      .content-wrapper {
        display: flex;
        flex-direction: column; /* æ¡Œæ©Ÿé è¨­ï¼šæ–‡å­—åœ¨ä¸Šã€rootåœ¨ä¸‹ */
        gap: 20px;
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        padding: 0 16px 100px 16px;
        box-sizing: border-box;
      }

      .intro-text {
        font-size: 1rem;
        line-height: 1.6;
      }

      .intro-text h1 {
        font-size: 1.6rem;
        margin-bottom: 12px;
      }

      .intro-text h2 {
        font-size: 1.3rem;
        margin-top: 20px;
        margin-bottom: 8px;
      }

      @media (max-width: 767px) {
        .content-wrapper {
          flex-direction: column-reverse; /* æ‰‹æ©Ÿï¼šé¡›å€’ï¼Œroot åœ¨ä¸Šã€æ–‡å­—åœ¨ä¸‹ */
          margin-top: 30px;
          padding: 0 16px 80px 16px;
        }
        .intro-text {
          text-align: left;
          font-size: 1rem;
        }
        .intro-text h1 {
          font-size: 1.4rem;
        }
      }

      /* æ¯›ç»ç’ƒè³ªæ„Ÿ Footer */
      .frosted-footer {
        margin: 0 auto;
        margin-top: 50px;
        min-height: 28px;
        padding: 12px 0 10px 0;
        background: rgba(36, 38, 48, 0.92);
        box-shadow: 0 -2px 18px rgba(30, 32, 40, 0.13);
        backdrop-filter: blur(14px) saturate(1.5);
        -webkit-backdrop-filter: blur(14px) saturate(1.5);
        border-top: 1.5px solid rgba(80, 80, 90, 0.18);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1em;
        color: #e0e0e0;
        letter-spacing: 0.03em;
        font-family: "Inter", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        transition: background 0.3s;
        user-select: none;
        width: 100%;
        border-radius: 0;
      }
      @media (max-width: 600px) {
        .frosted-footer {
          font-size: 0.92em;
          min-height: 22px;
          padding: 8px 0 5px 0;
        }
      }

      /* åŸºç¤ CSS æ¨£å¼ */
      body {
        font-family: "Inter", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        background-color: #f0f2f5;
        color: #333;
        padding: 0;
        box-sizing: border-box;
      }

      /* ä¸»å¡ç‰‡å®¹å™¨ - é è¨­ç‚ºç„¡å¡ç‰‡æ•ˆæœ */
      .app-card-container {
        position: relative; /* ç‚ºçµ•å°å®šä½çš„æ™‚é–“é¡¯ç¤ºæä¾›åƒè€ƒé» */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
        max-width: 450px; /* æ¨¡æ“¬æ‰‹æ©ŸAPPä»‹é¢å¯¬åº¦ï¼Œç•¥å¾®æ”¾å¯¬ */
        padding: 20px;
        padding-top: 50px; /* å¢åŠ é ‚éƒ¨å…§é‚Šè·ï¼Œç‚ºæ™‚é–“é¡¯ç¤ºç•™å‡ºç©ºé–“ */
        box-sizing: border-box;
        /* åˆå§‹ç‹€æ…‹ç„¡èƒŒæ™¯ã€ç„¡åœ“è§’ã€ç„¡é™°å½± */
        background-color: transparent;
        border-radius: 0;
        box-shadow: none;
        margin-bottom: 25px; /* èˆ‡ä¸‹æ–¹ç‹€æ…‹é¡¯ç¤ºå€å¡Šçš„é–“è· */
        overflow: hidden; /* ç¢ºä¿èƒŒæ™¯ä¸æº¢å‡ºåœ“è§’ */
        z-index: 1; /* ç¢ºä¿æ•´å€‹å¡ç‰‡åœ¨bodyçš„èƒŒæ™¯ä¹‹ä¸Š */
        min-height: 250px; /* ç¢ºä¿å¡ç‰‡åœ¨æ²’æœ‰LOGOé¡¯ç¤ºæ™‚ä¹Ÿæœ‰è¶³å¤ é«˜åº¦ */
        transition: all 0.3s ease-in-out; /* å¹³æ»‘éæ¸¡æ•ˆæœ */
      }

      /* ä¸»å¡ç‰‡å®¹å™¨ - é¸æ“‡åº—å®¶å¾Œçš„å¡ç‰‡æ•ˆæœ */
      .app-card-container.selected-state {
        background-color: #ffffff; /* å¢åŠ èƒŒæ™¯è‰² */
        border-radius: 20px; /* åœ“è§’ */
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); /* æ›´æ˜é¡¯çš„é™°å½± */
        background-size: contain; /* èƒŒæ™¯åœ–ç‰‡è¦†è“‹æ•´å€‹å®¹å™¨ */
        background-position: center center; /* èƒŒæ™¯åœ–ç‰‡å±…ä¸­ */
        background-repeat: no-repeat; /* èƒŒæ™¯åœ–ç‰‡ä¸é‡è¤‡ */
      }

      /* å³ä¸Šè§’æ™‚é–“é¡¯ç¤º */
      .current-time-display {
        position: absolute;
        top: 15px; /* è·é›¢é ‚éƒ¨ */
        right: 20px; /* è·é›¢å³å´ */
        font-size: 1.1em;
        font-weight: bold;
        color: #007bff; /* è—è‰² */
        background-color: #e9ecef;
        padding: 5px 10px;
        border-radius: 8px;
        z-index: 10; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
      }

      /* åˆå§‹ç‹€æ…‹ï¼šå…©å€‹å¤§ LOGO å®¹å™¨ (æ‰‹æ©Ÿç‰ˆç‚º columnï¼Œæ¡Œé¢ç‰ˆç‚º grid) */
      .logo-container {
        width: 100%;
        display: flex; /* é è¨­ç‚º flexï¼Œæ‰‹æ©Ÿä¸Šç‚º column */
        flex-direction: column;
        gap: 25px; /* å¢åŠ é–“è· */
        margin-bottom: 35px; /* å¢åŠ ä¸‹æ–¹é–“è· */
        position: relative; /* ç¢ºä¿å…§å®¹åœ¨èƒŒæ™¯ä¹‹ä¸Š */
        z-index: 2;
      }
      .logo-wrapper {
        background-color: rgba(255, 255, 255, 0.9); /* è¼•å¾®é€æ˜èƒŒæ™¯è‰² */
        border-radius: 18px; /* åœ“è§’ */
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08); /* è¼•å¾®é™°å½± */
        overflow: hidden;
        cursor: pointer;
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        padding: 25px; /* å¢åŠ å…§é‚Šè· */
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 120px; /* ç¢ºä¿é«˜åº¦ä¸€è‡´ */
      }
      .logo-wrapper:hover {
        transform: translateY(-7px); /* æ‡¸åœæ•ˆæœæ›´æ˜é¡¯ */
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12); /* æ‡¸åœé™°å½± */
      }
      .logo-wrapper img {
        width: 100%; /* LOGO å°ºå¯¸æ”¾å¤§ */
        height: 100%; /* å¡«æ»¿å®¹å™¨é«˜åº¦ */
        max-width: 250px; /* é™åˆ¶æœ€å¤§å¯¬åº¦ */
        object-fit: contain; /* ä¿æŒé•·å¯¬æ¯” */
        display: block;
      }

      /* ç‹€æ…‹é¡¯ç¤ºæ–‡å­—çš„å¤–éƒ¨å®¹å™¨ (ä½æ–¼ä¸»å¡ç‰‡ä¸‹æ–¹) */
      .status-display-outer-container {
        width: 100%;
        max-width: 450px; /* èˆ‡ä¸»å¡ç‰‡å¯¬åº¦ä¸€è‡´ */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 0px 20px; /* ç§»é™¤èƒŒæ™¯å’Œé™°å½±å¾Œï¼Œèª¿æ•´å…§é‚Šè· */
        box-sizing: border-box;
        margin-bottom: 25px; /* èˆ‡ä¸‹æ–¹åˆ‡æ›æŒ‰éˆ•çš„é–“è· */
        min-height: 100px; /* ç¢ºä¿æœ‰è¶³å¤ é«˜åº¦ */
      }

      /* é¸å–å¾Œç‹€æ…‹ï¼šå–®ä¸€å° LOGO å¤–éƒ¨å®¹å™¨ (ä½æ–¼ç‹€æ…‹é¡¯ç¤ºå€å¡Šä¸‹æ–¹) */
      .switch-logo-container-outer {
        width: 100%;
        max-width: 450px; /* èˆ‡ä¸»å¡ç‰‡å¯¬åº¦ä¸€è‡´ */
        display: flex;
        justify-content: center; /* ç½®ä¸­é¡¯ç¤º */
        align-items: center;
        padding: 15px 20px; /* å¢åŠ å…§é‚Šè· */
        box-sizing: border-box;
        border-radius: 15px; /* åœ“è§’ */
        /* æ¡Œé¢ç‰ˆçµ•å°å®šä½ */
        position: static; /* é è¨­ç‚º static (æ‰‹æ©Ÿç‰ˆ) */
        bottom: auto;
        right: auto;
        z-index: auto;
      }
      .switch-logo-wrapper {
        background-color: #ffffff; /* æ›´æ”¹ç‚ºç™½è‰²èƒŒæ™¯ */
        border-radius: 12px; /* è¼ƒå°çš„åœ“è§’ */
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); /* è¼ƒè¼•çš„é™°å½± */
        overflow: hidden;
        cursor: pointer;
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        padding: 10px 15px; /* èª¿æ•´å…§é‚Šè·ï¼Œç‚ºå‚ç›´ä½ˆå±€ç•™å‡ºç©ºé–“ */
        display: flex;
        flex-direction: column; /* å‚ç›´å †ç–Šåœ–ç‰‡å’Œæ–‡å­— */
        justify-content: center;
        align-items: center;
        width: fit-content; /* å…§å®¹è‡ªé©æ‡‰å¯¬åº¦ */
        max-width: 220px; /* èª¿æ•´æœ€å¤§å¯¬åº¦ä»¥å®¹ç´æ©«å‘ LOGO å’Œæ–‡å­— */
        gap: 5px; /* ç¨å¾®æ¸›å°‘ LOGO èˆ‡æ–‡å­—çš„é–“è· */
      }
      .switch-logo-wrapper:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }
      .switch-logo-wrapper img {
        width: 100%; /* è®“åœ–ç‰‡å¯¬åº¦å¡«æ»¿å®¹å™¨ */
        height: auto; /* é«˜åº¦è‡ªé©æ‡‰ä»¥ä¿æŒæ¯”ä¾‹ */
        max-height: 35px; /* é™åˆ¶åœ–ç‰‡æœ€å¤§é«˜åº¦ */
        display: block;
        object-fit: contain; /* ä¿æŒé•·å¯¬æ¯” */
      }
      .switch-logo-text {
        font-size: 1em; /* ç¨å¾®èª¿æ•´å­—é«”å¤§å° */
        color: #555;
        white-space: nowrap; /* é¿å…æ–‡å­—æ›è¡Œ */
        flex-shrink: 0; /* ç¢ºä¿æ–‡å­—ä¸è¢«å£“ç¸® */
        text-align: center; /* ç¢ºä¿æ–‡å­—å±…ä¸­ */
      }

      /* ç‹€æ…‹é¡¯ç¤ºæ–‡å­— */
      .status-main-text {
        font-size: 2.4em; /* ç‹€æ…‹æ–‡å­—æ”¾å¤§ */
        font-weight: bold;
        color: #dc3545; /* å‹å–„æ™‚å…‰ä¸»æ–‡å­—ç‚ºç´…è‰² (æ¢å¾©ç‚ºæ·ºè‰²èƒŒæ™¯ä¸‹çš„é¡è‰²) */
        text-align: center;
        min-height: 1.5em; /* é¿å…å…§å®¹è®Šå‹•æ™‚é«˜åº¦è·³å‹• */
        transition: color 0.3s ease-in-out;
        margin-bottom: 10px; /* èˆ‡æŠ˜æ‰£æ–‡å­—çš„é–“è· */
        text-shadow: none; /* ç§»é™¤æ–‡å­—é™°å½± */
      }
      .status-discount-text {
        font-size: 1.8em; /* æŠ˜æ‰£æ–‡å­—å¤§å° */
        font-weight: bold;
        color: #28a745; /* æŠ˜æ‰£æ–‡å­—ç‚ºç¶ è‰² (æ¢å¾©ç‚ºæ·ºè‰²èƒŒæ™¯ä¸‹çš„é¡è‰²) */
        text-align: center;
        min-height: 1.2em; /* é¿å…å…§å®¹è®Šå‹•æ™‚é«˜åº¦è·³å‹• */
        text-shadow: none; /* ç§»é™¤æ–‡å­—é™°å½± */
      }
      .status-placeholder {
        font-size: 1.8em;
        color: #6c757d; /* ç°è‰²æç¤ºæ–‡å­— (æ¢å¾©ç‚ºæ·ºè‰²èƒŒæ™¯ä¸‹çš„é¡è‰²) */
        text-align: center;
        min-height: 1.5em;
        text-shadow: none; /* ç§»é™¤æ–‡å­—é™°å½± */
      }

      /* æœå°‹åŠŸèƒ½æ¨£å¼å·²ç§»é™¤ - ç›´æ¥ä½¿ç”¨åº«å­˜æŒ‰éˆ•è§¸ç™¼ä½ç½®æœå°‹ */

      #back-to-initial {
        position: fixed;
        top: 20px;
        left: 20px;
        padding: 10px 20px;
        background-color: #6c757d;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        z-index: 100;
        transition: background-color 0.3s;
      }

      #back-to-initial:hover {
        background-color: #5a6268;
      }

      .hidden {
        display: none !important;
      }

      /* è¼‰å…¥æŒ‡ç¤ºå™¨ */
      #loading-indicator {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 20px 40px;
        border-radius: 10px;
        z-index: 1000;
        text-align: center;
      }

      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #007bff;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 10px;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* è„ˆè¡å‹•ç•«ï¼ˆç”¨æ–¼è¼‰å…¥ä¸­ç‹€æ…‹ï¼‰ */
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }

      /* æ·¡å…¥å‹•ç•«ï¼ˆç”¨æ–¼å…§å®¹è¼‰å…¥å®Œæˆï¼‰ */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(5px); }
        to { opacity: 1; transform: translateY(0); }
      }

      /* éŒ¯èª¤è¨Šæ¯ */
      #error-message {
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: #dc3545;
        color: white;
        padding: 15px 20px;
        border-radius: 8px;
        z-index: 1000;
        max-width: 300px;
      }

      /* ========================================
         Friendly Cat é¢¨æ ¼ - é–€å¸‚åˆ—è¡¨æ¨£å¼
         ======================================== */

      /* é–€å¸‚å¡ç‰‡å®¹å™¨ */
      .store-card {
        background: #ffffff;
        border-radius: 16px;
        padding: 0;
        margin-bottom: 16px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
        cursor: pointer;
      }

      .store-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
      }

      /* é–€å¸‚é ­éƒ¨å€åŸŸ */
      .store-header {
        padding: 16px;
        background: #ffffff;
        border-bottom: 1px solid #f0f0f0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }

      /* é–€å¸‚æ¨™é¡Œå€ï¼ˆlogo + åº—å + åœ°åœ–åœ–æ¨™ï¼‰ */
      .store-title-section {
        display: flex;
        align-items: center;
        gap: 12px;
        flex: 1;
      }

      /* é–€å¸‚ Logo */
      .store-logo {
        width: 24px;
        height: 24px;
        object-fit: contain;
        flex-shrink: 0;
      }

      /* é–€å¸‚åç¨± */
      .store-name {
        font-size: 1.1em;
        font-weight: 600;
        color: #1a1a1a;
        flex: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* Google Maps é€£çµåœ–æ¨™ */
      .map-link-icon {
        width: 20px;
        height: 20px;
        opacity: 0.6;
        transition: opacity 0.2s;
        cursor: pointer;
        flex-shrink: 0;
      }

      .map-link-icon:hover {
        opacity: 1;
      }

      /* é–€å¸‚è³‡è¨Šå€åŸŸï¼ˆè·é›¢ï¼‰ */
      .store-distance-section {
        padding: 12px 16px;
        background: #fafafa;
        border-bottom: 1px solid #f0f0f0;
      }

      .store-distance {
        font-size: 0.95em;
        color: #666;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .store-distance::before {
        content: "ğŸ“";
        font-size: 1.1em;
      }

      /* å•†å“åˆ†é¡ç¶²æ ¼å€åŸŸ */
      .store-categories-section {
        padding: 16px;
        background: #ffffff;
      }

      /* å•†å“åˆ†é¡ç¶²æ ¼ */
      .store-categories-grid {
        display: flex;
        gap: 12px;
        overflow-x: auto;
        padding-bottom: 4px;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        scrollbar-color: #e0e0e0 transparent;
      }

      .store-categories-grid::-webkit-scrollbar {
        height: 4px;
      }

      .store-categories-grid::-webkit-scrollbar-track {
        background: transparent;
      }

      .store-categories-grid::-webkit-scrollbar-thumb {
        background: #e0e0e0;
        border-radius: 2px;
      }

      /* å–®å€‹åˆ†é¡é …ç›® */
      .store-category-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        min-width: 72px;
        text-align: center;
        position: relative;
      }

      /* åˆ†é¡åœ–ç‰‡ */
      .store-category-image {
        width: 56px;
        height: 56px;
        border-radius: 8px;
        object-fit: cover;
        background: #f5f5f5;
        margin-bottom: 6px;
      }

      /* åˆ†é¡åç¨± */
      .store-category-name {
        font-size: 0.8em;
        color: #666;
        margin-bottom: 4px;
        white-space: nowrap;
      }

      /* æ•¸é‡å¾½ç«  - Friendly Cat æ©™è‰²é¢¨æ ¼ */
      .store-category-badge {
        position: absolute;
        top: -4px;
        right: -4px;
        background: #ff6b35;
        color: white;
        font-size: 0.75em;
        font-weight: 600;
        padding: 2px 6px;
        border-radius: 10px;
        min-width: 20px;
        text-align: center;
        box-shadow: 0 2px 4px rgba(255, 107, 53, 0.3);
      }

      /* é–€å¸‚åœ°å€ï¼ˆéš±è—ä½†ä¿ç•™è³‡æ–™ï¼‰ */
      .store-address {
        display: none;
      }

      /* æŸ¥çœ‹å•†å“æŒ‰éˆ•ï¼ˆæ•´åˆåœ¨å¡ç‰‡é»æ“Šï¼‰ */
      .view-products-btn {
        display: none;
      }

      /* å•†å“åˆ†é¡æ¨£å¼ */
      .selected-store-info {
        text-align: center;
        margin-bottom: 25px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 12px;
      }

      .selected-store-info h2 {
        font-size: 1.5em;
        color: #333;
        margin-bottom: 8px;
      }

      .selected-store-info p {
        color: #666;
        margin: 4px 0;
      }

      .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .category-card {
        background: white;
        border-radius: 12px;
        padding: 15px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        border: 2px solid #e9ecef;
        position: relative;
      }

      .category-card:hover {
        transform: translateY(-5px);
        border-color: #007bff;
        box-shadow: 0 4px 12px rgba(0,123,255,0.2);
      }

      .category-card img {
        width: 80px;
        height: 80px;
        object-fit: contain;
        margin-bottom: 10px;
      }

      .category-card h3 {
        font-size: 1em;
        color: #333;
        margin-bottom: 8px;
      }

      .qty-badge {
        display: inline-block;
        background: #ff9800;
        color: white;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 0.9em;
        font-weight: bold;
      }

      /* å•†å“é …ç›®æ¨£å¼ */
      .category-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
      }

      .back-btn {
        padding: 8px 16px;
        background: #6c757d;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1em;
      }

      .back-btn:hover {
        background: #5a6268;
      }

      .category-header h2 {
        font-size: 1.5em;
        color: #333;
      }

      .items-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .item-card {
        background: white;
        border-radius: 10px;
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border: 1px solid #e9ecef;
      }

      .item-info h3 {
        font-size: 1.1em;
        color: #333;
        margin-bottom: 5px;
      }

      .item-qty {
        font-size: 0.9em;
        color: #666;
      }

      .item-price {
        text-align: right;
      }

      .original-price {
        display: block;
        text-decoration: line-through;
        color: #999;
        font-size: 0.9em;
      }

      .discount-price {
        display: block;
        color: #28a745;
        font-size: 1.3em;
        font-weight: bold;
      }

      .discount-label {
        display: block;
        color: #dc3545;
        font-size: 0.85em;
        margin-top: 2px;
      }

      .price {
        font-size: 1.2em;
        font-weight: bold;
        color: #333;
      }

      .no-results {
        text-align: center;
        padding: 40px 20px;
        color: #666;
      }

      /* ========================================
         åº“å­˜æŸ¥è¯¢æŒ‰é’®æ ·å¼
         ======================================== */

      /* åº“å­˜æŒ‰é’®åŸºç¡€æ ·å¼ */
      .inventory-button {
        /* å°ºå¯¸ä¸é—´è· */
        width: 100%;
        max-width: 400px;
        padding: 16px 24px;
        margin: 20px auto 20px;

        /* é¢œè‰²ä¸èƒŒæ™¯ - é¢¨æ ¼ 7: æ¥µç°¡é»‘ç™½ */
        background: #333;
        color: #ffffff;
        border: none;

        /* å½¢çŠ¶ä¸æ•ˆæœ */
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);

        /* æ–‡å­—æ ·å¼ */
        font-size: 1.1em;
        font-weight: 600;
        text-align: center;
        letter-spacing: 0.5px;

        /* äº¤äº’ */
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

        /* å¸ƒå±€ */
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      /* æ‚¬åœæ•ˆæœï¼ˆæ¡Œé¢ç‰ˆï¼‰ */
      .inventory-button:hover {
        background: #000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        transform: translateY(-2px);
      }

      /* æŒ‰ä¸‹æ•ˆæœ */
      .inventory-button:active {
        transform: translateY(0px);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      /* ç¦ç”¨çŠ¶æ€ */
      .inventory-button:disabled {
        background: #cccccc;
        cursor: not-allowed;
        box-shadow: none;
        opacity: 0.6;
      }

      /* å‡ºç°åŠ¨ç”» */
      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .inventory-button.appear {
        animation: slideInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* æ¶ˆå¤±åŠ¨ç”» */
      @keyframes slideOutDown {
        from {
          opacity: 1;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          transform: translateY(20px);
        }
      }

      .inventory-button.disappear {
        animation: slideOutDown 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
      @media (max-width: 600px) {
        /* é–€å¸‚å¡ç‰‡æ‰‹æ©Ÿç‰ˆèª¿æ•´ */
        .store-card {
          border-radius: 12px;
          margin-bottom: 12px;
        }

        .store-header {
          padding: 12px;
        }

        .store-title-section {
          gap: 8px;
        }

        .store-logo {
          width: 20px;
          height: 20px;
        }

        .store-name {
          font-size: 1em;
        }

        .map-link-icon {
          width: 18px;
          height: 18px;
        }

        .store-distance-section {
          padding: 10px 12px;
        }

        .store-distance {
          font-size: 0.9em;
        }

        .store-categories-section {
          padding: 12px;
        }

        .store-categories-grid {
          gap: 10px;
        }

        .store-category-item {
          min-width: 60px;
        }

        .store-category-image {
          width: 48px;
          height: 48px;
          border-radius: 6px;
        }

        .store-category-name {
          font-size: 0.75em;
        }

        .store-category-badge {
          font-size: 0.7em;
          padding: 2px 5px;
          border-radius: 8px;
          min-width: 18px;
        }

        /* å…¶ä»–åˆ†é¡ç¶²æ ¼æ‰‹æ©Ÿç‰ˆèª¿æ•´ */
        .categories-grid {
          grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
          gap: 10px;
        }

        .category-card img {
          width: 60px;
          height: 60px;
        }

        #back-to-initial {
          top: 10px;
          left: 10px;
          padding: 8px 16px;
          font-size: 0.9em;
        }
        body {
          padding: 15px;
        }
        .app-card-container {
          padding: 15px;
          padding-top: 40px; /* æ‰‹æ©Ÿä¸Šèª¿æ•´é ‚éƒ¨å…§é‚Šè· */
          border-radius: 15px;
          box-shadow: none; /* æ‰‹æ©Ÿä¸Šç§»é™¤é™°å½±ï¼Œæ›´ç°¡æ½” */
          background-color: transparent; /* æ‰‹æ©Ÿä¸Šç§»é™¤èƒŒæ™¯è‰² */
          margin-bottom: 15px; /* æ‰‹æ©Ÿä¸Šèª¿æ•´èˆ‡ä¸‹æ–¹ç‹€æ…‹é¡¯ç¤ºå€å¡Šçš„é–“è· */
          min-height: 200px; /* æ‰‹æ©Ÿä¸Šèª¿æ•´å¡ç‰‡æœ€å°é«˜åº¦ */
        }
        .current-time-display {
          top: 10px;
          right: 10px;
          font-size: 0.9em;
          padding: 4px 8px;
          border-radius: 6px;
        }
        .logo-container {
          gap: 15px;
          margin-bottom: 25px;
        }
        .logo-wrapper {
          padding: 20px;
          border-radius: 12px;
        }
        .status-main-text {
          font-size: 1.8em;
        }
        .status-discount-text {
          font-size: 1.4em;
        }
        .status-placeholder {
          font-size: 1.4em;
        }
        /* æ‰‹æ©Ÿä¸Šç‹€æ…‹é¡¯ç¤ºå€å¡Šèª¿æ•´ */
        .status-display-outer-container {
          padding: 10px 15px;
          margin-bottom: 15px;
          min-height: 80px;
        }
        /* æ‰‹æ©Ÿä¸Šåˆ‡æ› LOGO æ¨£å¼èª¿æ•´ */
        .switch-logo-container-outer {
          padding: 10px 15px; /* æ‰‹æ©Ÿä¸Šèª¿æ•´å…§é‚Šè· */
          position: static; /* ç¢ºä¿æ‰‹æ©Ÿä¸Šæ˜¯æ­£å¸¸æµå‹• */
        }
        .switch-logo-wrapper {
          padding: 6px 12px; /* æ‰‹æ©Ÿä¸Šæ›´å°çš„å…§é‚Šè· */
          border-radius: 10px;
          max-width: 180px; /* æ‰‹æ©Ÿä¸Šèª¿æ•´æœ€å¤§å¯¬åº¦ */
        }
        .switch-logo-wrapper img {
          max-height: 28px; /* æ‰‹æ©Ÿä¸Šèª¿æ•´åœ–ç‰‡æœ€å¤§é«˜åº¦ */
        }
        .switch-logo-text {
          font-size: 0.9em;
        }

        /* æ‰‹æœºç‰ˆåº“å­˜æŒ‰é’®æ ·å¼ */
        .inventory-button {
          padding: 14px 20px;
          font-size: 1em;
          margin: 15px auto 15px;
          border-radius: 8px;
        }

        /* æ‰‹æœºç‰ˆä¸æ˜¾ç¤ºæ‚¬åœæ•ˆæœï¼ˆè§¦æ‘¸å±ï¼‰ */
        .inventory-button:hover {
          transform: none;
        }

        /* è§¦æ‘¸åé¦ˆ */
        .inventory-button:active {
          background: #000;
          transform: scale(0.98);
        }
      }

      /* æ¡Œé¢ç‰ˆé¢ (> 600px) å°ˆç”¨æ¨£å¼ */
      @media (min-width: 601px) {
        .logo-container {
          display: grid;
          grid-template-columns: repeat(2, 1fr); /* 2 æ¬„ç¶²æ ¼ */
          gap: 30px; /* ç¶²æ ¼é–“è· */
          margin-bottom: 50px; /* å¢åŠ ä¸‹æ–¹é–“è· */
        }
        .logo-wrapper {
          padding: 30px; /* æ¡Œé¢ç‰ˆ LOGO å…§é‚Šè· */
        }
        .switch-logo-container-outer {
          position: absolute; /* æ¡Œé¢ç‰ˆçµ•å°å®šä½ */
          bottom: 20px;
          right: 20px;
          width: auto; /* å¯¬åº¦è‡ªé©æ‡‰å…§å®¹ */
          max-width: 300px; /* é™åˆ¶æœ€å¤§å¯¬åº¦ */
          padding: 0; /* ç§»é™¤å¤–éƒ¨ padding */
          box-shadow: none; /* ç§»é™¤å¤–éƒ¨é™°å½± */
          border-radius: 0; /* ç§»é™¤å¤–éƒ¨åœ“è§’ */
        }
        .switch-logo-wrapper {
          padding: 12px 20px; /* æ¡Œé¢ç‰ˆæŒ‰éˆ•å…§é‚Šè· */
          max-width: none; /* å–æ¶ˆæœ€å¤§å¯¬åº¦é™åˆ¶ï¼Œè®“å…§å®¹æ±ºå®š */
        }
      }
    </style>
  </head>
  <body>
    <!-- Frosted Glass Header -->
    <header class="frosted-header">
      <img
        src="myicon.png"
        alt="å‹å–„æ™‚å…‰LOGO"
        class="header-logo"
        loading="lazy"
      />
      <div class="header-texts">
        <div class="header-title">å‹å–„æ™‚å…‰æŠ˜æ‰£æŸ¥è©¢(IsNowFriend)</div>
        <div class="header-subtitle">
          å…¨å®¶ FamilyMartã€å°ä¸ƒ 7-11 å³æ™‚å„ªæƒ æ™‚æ®µã€å‹å–„æ™‚å…‰ä¸€è¦½è¡¨
        </div>
      </div>
    </header>

    <div class="content-wrapper">
      <!-- ä»‹ç´¹æ–‡å­— -->
      <div class="intro-text">
        <h1>å…¨å®¶ & å°ä¸ƒ å‹å–„æ™‚å…‰ï¼ˆä¹ä¸æ™‚å…‰ï¼‰æŠ˜æ‰£æ™‚é–“è¡¨</h1>
        <p>
          æƒ³çŸ¥é“å…¨å®¶ä¾¿åˆ©å•†åº—å’Œå°ä¸ƒ 7-11 ä»€éº¼æ™‚å€™æ‰“æŠ˜å—ï¼Ÿ<br />
          æˆ‘å€‘æ•´ç†äº†å®Œæ•´çš„ã€Œå‹å–„æ™‚å…‰ã€è³‡è¨Šï¼ŒåŒ…æ‹¬å…¨å®¶å‹å–„æ™‚å…‰æ™‚é–“ã€å°ä¸ƒæ‰“æŠ˜æ™‚æ®µï¼Œ
          å¹«åŠ©ä½ å¿«é€ŸæŸ¥è©¢æŠ˜æ‰£ï¼ˆä¿—ç¨±ä¹ä¸æ™‚å…‰ï¼‰ï¼Œé¿å…éŒ¯éä¾¿å®œå¥½åº·ã€‚
        </p>

        <h2>å…¨å®¶å‹å–„æ™‚å…‰æŠ˜æ‰£</h2>
        <ul>
          <li>10:00 - 17:00ï¼š7æŠ˜ï¼ˆé£¯ç³°ã€å£½å¸ã€æ‰‹å·ã€ä¾¿ç•¶é¡ç­‰ï¼‰</li>
          <li>17:00 - 00:00ï¼š7æŠ˜ï¼ˆä¾¿ç•¶ã€ä¸‰æ˜æ²»ã€æ²™æ‹‰ã€æ¹¯å“ç­‰ï¼‰</li>
        </ul>

        <h2>å°ä¸ƒ 7-11 å‹å–„æ™‚å…‰æŠ˜æ‰£</h2>
        <ul>
          <li>10:00 - 17:00ï¼š65æŠ˜ï¼ˆé®®é£Ÿéºµé¡èˆ‡ç±³é£¯ï¼‰</li>
          <li>19:00 - 19:59ï¼š8æŠ˜ï¼ˆä¸‰è§’é£¯ç³°ã€é®®é£Ÿéºµï¼‰</li>
          <li>20:00 - 03:00ï¼š65æŠ˜ï¼ˆä¸‰è§’é£¯ç³°ã€é®®é£Ÿéºµï¼‰</li>
        </ul>

        <p>
          ä½¿ç”¨æœ¬ç«™ã€Œå‹å–„æ™‚å…‰æŸ¥è©¢å·¥å…·ã€ï¼Œå°±èƒ½ç«‹å³ç¢ºèªå…¨å®¶æˆ–å°ä¸ƒç¾åœ¨æ˜¯å¦æ‰“æŠ˜ï¼Œ
          å¹¾é»æœ‰æŠ˜æ‰£ï¼Œä»¥åŠæŠ˜æ‰£å€’æ•¸è¨ˆæ™‚ã€‚
        </p>
      </div>

      <!-- React App -->
      <div id="root"></div>
    </div>

    <!-- è¿”å›åˆå§‹ç‹€æ…‹æŒ‰éˆ• -->
    <button id="back-to-initial" class="hidden">â† è¿”å›</button>

    <!-- è¼‰å…¥æŒ‡ç¤ºå™¨ -->
    <div id="loading-indicator" class="hidden">
      <div class="spinner"></div>
      <p id="loading-text">è¼‰å…¥ä¸­...</p>
    </div>

    <!-- éŒ¯èª¤è¨Šæ¯ -->
    <div id="error-message" class="hidden">
      <p id="error-text"></p>
    </div>

    <!-- åº—å®¶åˆ—è¡¨å®¹å™¨ -->
    <div id="store-list-container" class="hidden" style="width: 100%; max-width: 450px; margin: 20px auto;"></div>

    <!-- å•†å“åˆ†é¡å®¹å™¨ -->
    <div id="product-categories-container" class="hidden" style="width: 100%; max-width: 450px; margin: 20px auto;"></div>

    <!-- å•†å“é …ç›®å®¹å™¨ -->
    <div id="product-items-container" class="hidden" style="width: 100%; max-width: 450px; margin: 20px auto;"></div>

    <script type="text/babel">
      // å®šç¾©å‹å–„æ™‚å…‰å€é–“èˆ‡æŠ˜æ‰£è³‡è¨Š
      const FRIENDLY_TIME_CONFIG = {
        sevenEleven: {
          id: "sevenEleven",
          name: "7-ELEVEN",
          // æ›´æ–°ç‚ºä½ æä¾›çš„ä¸€èˆ¬ LOGO ç¶²å€
          logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/7-eleven_logo.svg/800px-7-eleven_logo.svg.png",
          // æ–°å¢æ©«å‘ LOGO ç¶²å€
          horizontalLogo:
            "https://www.us3c.com.tw/wp-content/uploads/2022/04/7-ELEVEn_%E6%A9%AB%E5%BC%8Flogo-%E8%BD%89%E6%8F%9Brgb_10909-04.png",
          friendlyHours: [
            // 10:00 - 17:00 65æŠ˜ (é®®é£Ÿéºµé¡èˆ‡ç±³é£¯)
            {
              start: { hour: 10, minute: 0 },
              end: { hour: 17, minute: 0 },
              discount: "65æŠ˜",
              description: "é®®é£Ÿéºµé¡èˆ‡ç±³é£¯",
            },
            // 19:00 - 19:59 8æŠ˜ (é®®é£ŸéºµåŒ…å«ä¸‰è§’/åœ“å½¢é£¯ç³°)
            {
              start: { hour: 19, minute: 0 },
              end: { hour: 19, minute: 59 },
              discount: "8æŠ˜",
              description: "é®®é£ŸéºµåŒ…å«ä¸‰è§’/åœ“å½¢é£¯ç³°",
            },
            // 20:00 - 03:00 65æŠ˜ (é®®é£ŸéºµåŒ…å«ä¸‰è§’/åœ“å½¢é£¯ç³°) - è·¨æ—¥
            {
              start: { hour: 20, minute: 0 },
              end: { hour: 3, minute: 0 },
              discount: "65æŠ˜",
              description: "é®®é£ŸéºµåŒ…å«ä¸‰è§’/åœ“å½¢é£¯ç³°",
            },
          ],
        },
        familyMart: {
          id: "familyMart",
          name: "å…¨å®¶",
          // æ›´æ–°ç‚ºä½ æä¾›çš„ä¸€èˆ¬ LOGO ç¶²å€
          logo: "https://play-lh.googleusercontent.com/e3AKbefh3znufeBBSF1anaUZwV7oSkTjNCn67ZdSD18DwE95y7lZY9uHDloXH8fcmg",
          // æ–°å¢æ©«å‘ LOGO ç¶²å€
          horizontalLogo:
            "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-h1Z5--PFgKXN_kIDwmMLDPb0UPYkA5wqkQ&s",
          friendlyHours: [
            // 10:00 - 17:00 7æŠ˜ (é£¯ç³°ã€å£½å¸ã€æ‰‹å·ã€ä¾¿ç•¶é¡ç­‰)
            {
              start: { hour: 10, minute: 0 },
              end: { hour: 17, minute: 0 },
              discount: "7æŠ˜",
              description: "é£¯ç³°ã€å£½å¸ã€æ‰‹å·ã€ä¾¿ç•¶é¡ç­‰",
            },
            // 17:00 - 00:00 7æŠ˜ (å³æœŸé®®é£Ÿï¼šä¾¿ç•¶ã€ä¸‰æ˜æ²»ã€æ²™æ‹‰ã€æ¹¯å“ç­‰)
            {
              start: { hour: 17, minute: 0 },
              end: { hour: 24, minute: 0 },
              discount: "7æŠ˜",
              description: "å³æœŸé®®é£Ÿï¼ˆä¾¿ç•¶ã€ä¸‰æ˜æ²»ã€æ²™æ‹‰ã€æ¹¯å“ç­‰ï¼‰",
            }, // 24:00 ä»£è¡¨ç•¶å¤©çµæŸï¼Œå³ 23:59:59
          ],
        },
      };

      /**
       * åˆ¤æ–·ç•¶å‰æ™‚é–“æ˜¯å¦åœ¨å‹å–„æ™‚å…‰å€é–“å…§ï¼Œä¸¦è¿”å›æŠ˜æ‰£è³‡è¨Šã€‚
       * @param {Date} currentTime ç•¶å‰æ™‚é–“ç‰©ä»¶ã€‚
       * @param {Object} storeConfig åº—å®¶é…ç½®ï¼ŒåŒ…å« friendlyHours é™£åˆ—ã€‚
       * @returns {{isFriendly: boolean, discount: string|null, description: string|null}} åˆ¤æ–·çµæœã€‚
       */
      const isFriendlyTime = (currentTime, storeConfig) => {
        const currentHour = currentTime.getHours();
        const currentMinute = currentTime.getMinutes();
        const currentTotalMinutes = currentHour * 60 + currentMinute;

        for (const range of storeConfig.friendlyHours) {
          const startTotalMinutes =
            range.start.hour * 60 + (range.start.minute || 0);
          let endTotalMinutes = range.end.hour * 60 + (range.end.minute || 0);

          // åˆ¤æ–·æ™‚é–“å€é–“æ˜¯å¦è·¨æ—¥ (ä¾‹å¦‚ 20:00 - 03:00)
          const crossesMidnight =
            range.start.hour > range.end.hour ||
            (range.start.hour === range.end.hour &&
              range.start.minute > range.end.minute);

          let inRange = false;

          if (!crossesMidnight) {
            // æ¨™æº–æ™‚é–“å€é–“ (ä¾‹å¦‚ 10:00 - 17:00 æˆ– 19:00 - 19:59)
            // å¦‚æœçµæŸåˆ†é˜æ˜¯ 59ï¼Œè¡¨ç¤ºåŒ…å«è©²åˆ†é˜ (ä¾‹å¦‚ 19:59:59)
            if (range.end.minute === 59) {
              inRange =
                currentTotalMinutes >= startTotalMinutes &&
                currentTotalMinutes <= endTotalMinutes;
            } else {
              // å¦å‰‡ï¼ŒçµæŸæ™‚é–“é»ä¸åŒ…å« (ä¾‹å¦‚ 17:00 æŒ‡ 16:59:59 ä¹‹å‰)
              inRange =
                currentTotalMinutes >= startTotalMinutes &&
                currentTotalMinutes < endTotalMinutes;
            }
          } else {
            // è·¨æ—¥æ™‚é–“å€é–“ (ä¾‹å¦‚ 20:00 - 03:00)
            // åˆ¤æ–·é‚è¼¯ï¼šåœ¨ç¬¬ä¸€å¤©çš„å€é–“å…§ OR åœ¨ç¬¬äºŒå¤©çš„å€é–“å…§
            const isAfterStartOnFirstDay =
              currentTotalMinutes >= startTotalMinutes &&
              currentTotalMinutes < 24 * 60; // Up to 23:59
            let isBeforeEndOnNextDay = currentTotalMinutes >= 0; // From 00:00

            // å¦‚æœè·¨æ—¥å€é–“çš„çµæŸåˆ†é˜æ˜¯ 59ï¼Œå‰‡ç¬¬äºŒå¤©çš„å€é–“éœ€è¦åŒ…å«è©²åˆ†é˜
            if (range.end.minute === 59) {
              isBeforeEndOnNextDay =
                isBeforeEndOnNextDay && currentTotalMinutes <= endTotalMinutes;
            } else {
              isBeforeEndOnNextDay =
                isBeforeEndOnNextDay && currentTotalMinutes < endTotalMinutes;
            }

            inRange = isAfterStartOnFirstDay || isBeforeEndOnNextDay;
          }

          if (inRange) {
            return {
              isFriendly: true,
              discount: range.discount,
              description: range.description,
            };
          }
        }
        return { isFriendly: false, discount: null, description: null };
      };

      // ä¸»è¦çš„æ‡‰ç”¨çµ„ä»¶
      function App() {
        // ä½¿ç”¨ useState ä¾†ç®¡ç†ç•¶å‰æ™‚é–“å’Œé¸æ“‡çš„åº—å®¶
        const [currentTime, setCurrentTime] = React.useState(new Date());
        const [selectedStoreId, setSelectedStoreId] = React.useState(null); // 'sevenEleven' or 'familyMart'

        // ä½¿ç”¨ useEffect ä¾†è¨­å®šå®šæ™‚å™¨ï¼Œä¸¦åœ¨çµ„ä»¶å¸è¼‰æ™‚æ¸…é™¤
        React.useEffect(() => {
          const intervalId = setInterval(() => {
            setCurrentTime(new Date()); // æ¯ 1000 æ¯«ç§’ (1 ç§’) æ›´æ–°ä¸€æ¬¡æ™‚é–“
          }, 1000); // æ›´æ”¹ç‚º 1000ms è®“ç§’æ•¸è·³å‹•

          // æ¸…é™¤å®šæ™‚å™¨ï¼Œé¿å…è¨˜æ†¶é«”æ´©æ¼
          return () => clearInterval(intervalId);
        }, []); // ç©ºä¾è³´é™£åˆ—è¡¨ç¤ºåªåœ¨çµ„ä»¶ mount å’Œ unmount æ™‚åŸ·è¡Œ

        // è™•ç†åº—å®¶ LOGO é»æ“Šäº‹ä»¶
        const handleLogoClick = (storeId) => {
          setSelectedStoreId(storeId);
          // è¨­å®šå“ç‰Œé¸æ“‡ï¼ˆä½†ä¸ç«‹å³æœå°‹ï¼‰
          const brandMap = {
            'sevenEleven': '7-11',
            'familyMart': 'å…¨å®¶'
          };
          UIManager.state.selectedBrand = brandMap[storeId];
          console.log(`ğŸª é¸æ“‡å“ç‰Œ: ${brandMap[storeId]}`);
        };

        // æ ¼å¼åŒ–æ™‚é–“ç‚º HH:MM:SS æ ¼å¼ (24å°æ™‚åˆ¶)

        // å‹å–„æ™‚å…‰å€’æ•¸æç¤º function
        function getFriendlyTimeNotice() {
          if (!selectedStoreId) return null;
          const storeConfig = FRIENDLY_TIME_CONFIG[selectedStoreId];
          const now = currentTime;
          const nowMinutes = now.getHours() * 60 + now.getMinutes();
          // å–å¾—æ‰€æœ‰æ™‚æ®µï¼Œä¸¦æ¨™è¨»é–‹å§‹/çµæŸåˆ†é˜ã€æŠ˜æ‰£
          const periods = storeConfig.friendlyHours.map((r) => {
            const start = r.start.hour * 60 + (r.start.minute || 0);
            let end = r.end.hour * 60 + (r.end.minute || 0);
            // è·¨æ—¥è™•ç†
            if (end <= start) end += 1440;
            return { start, end, discount: r.discount };
          });
          // ä¾ç…§ç¾åœ¨æ™‚é–“æ’åºæ‰€æœ‰æ™‚æ®µï¼ˆè·¨æ—¥ä¹Ÿèƒ½æ­£ç¢ºæ’åºï¼‰
          const sorted = periods
            .map((p) => ({
              ...p,
              start: p.start,
              end: p.end,
            }))
            .sort((a, b) => a.start - b.start);
          // æ‰¾å‡ºç›®å‰åœ¨å“ªå€‹æ™‚æ®µ
          let inPeriod = null;
          for (const p of sorted) {
            let s = p.start,
              e = p.end;
            if (nowMinutes < s) (s -= 1440), (e -= 1440); // è·¨æ—¥ä¿®æ­£
            if (nowMinutes >= s && nowMinutes < e) {
              inPeriod = p;
              break;
            }
          }
          // æ‰¾å‡ºä¸‹ä¸€å€‹æ™‚æ®µ
          let nextPeriod = null;
          let minDelta = Infinity;
          for (const p of sorted) {
            let s = p.start;
            if (s <= nowMinutes) s += 1440; // è·¨æ—¥
            const delta = s - nowMinutes;
            if (delta > 0 && delta < minDelta) {
              minDelta = delta;
              nextPeriod = p;
            }
          }
          // æ‰¾å‡ºæœ¬æ™‚æ®µçµæŸå¾Œçš„ä¸‹ä¸€å€‹æ™‚æ®µï¼ˆæŠ˜æ‰£è®ŠåŒ–ï¼‰
          let nextChange = null;
          if (inPeriod) {
            let minChange = Infinity;
            for (const p of sorted) {
              let s = p.start;
              if (s <= nowMinutes) s += 1440;
              const delta = s - nowMinutes;
              if (delta > 0 && delta < minChange) {
                minChange = delta;
                nextChange = p;
              }
            }
          }
          // æ ¼å¼åŒ–åˆ†é˜ç‚ºã€ŒXå°æ™‚Yåˆ†ã€
          function formatDelta(mins) {
            if (mins < 1) return "ä¸åˆ°1åˆ†é˜";
            const h = Math.floor(mins / 60);
            const m = mins % 60;
            return (h ? h + "å°æ™‚" : "") + (m ? m + "åˆ†" : !h ? "0åˆ†" : "");
          }
          // éå‹å–„æ™‚å…‰ï¼Œé¡¯ç¤ºè·é›¢ä¸‹æ¬¡é–‹å§‹
          if (!inPeriod && nextPeriod) {
            return `è·é›¢ä¸‹æ¬¡å‹å–„æ™‚å…‰ï¼ˆ${nextPeriod.discount}ï¼‰é‚„æœ‰${formatDelta(
              minDelta
            )}`;
          }
          // å‹å–„æ™‚å…‰ä¸­ï¼Œé¡¯ç¤ºè·é›¢çµæŸèˆ‡æŠ˜æ‰£è®ŠåŒ–
          if (inPeriod) {
            const timeToEnd = inPeriod.end - nowMinutes;
            let msg = `æœ¬æ™‚æ®µå‰©é¤˜${formatDelta(timeToEnd)}`;
            // æŠ˜æ‰£è®ŠåŒ–
            if (nextChange && nextChange.discount !== inPeriod.discount) {
              msg += `ï¼Œå†${formatDelta(nextChange.start - nowMinutes)}è®Šæˆ${
                nextChange.discount
              }`;
            }
            return msg;
          }
          return null;
        }
        const formattedTime = React.useMemo(() => {
          const hours = String(currentTime.getHours()).padStart(2, "0");
          const minutes = String(currentTime.getMinutes()).padStart(2, "0");
          const seconds = String(currentTime.getSeconds()).padStart(2, "0"); // æ–°å¢ç§’æ•¸
          return `${hours}:${minutes}:${seconds}`;
        }, [currentTime]); // ç•¶ currentTime æ”¹è®Šæ™‚é‡æ–°è¨ˆç®—

        // æ ¹æ“šé¸æ“‡çš„åº—å®¶åˆ¤æ–·æ˜¯å¦ç‚ºå‹å–„æ™‚å…‰ï¼Œä¸¦æº–å‚™é¡¯ç¤ºå…§å®¹
        const renderStatusContent = React.useMemo(() => {
          if (!selectedStoreId) {
            return (
              <p className="status-placeholder">è«‹é»æ“Šä¸Šæ–¹ LOGO æŸ¥è©¢å‹å–„æ™‚å…‰</p>
            );
          }

          const storeConfig = FRIENDLY_TIME_CONFIG[selectedStoreId];
          if (!storeConfig) {
            return <p className="status-placeholder">æŸ¥è©¢éŒ¯èª¤ï¼Œè«‹é‡è©¦</p>;
          }

          const result = isFriendlyTime(currentTime, storeConfig);

          return (
            <div style={{ width: "100%", textAlign: "center" }}>
              <h1 className="status-main-text">
                {storeConfig.name}{" "}
                {result.isFriendly ? "ç¾åœ¨æ˜¯å‹å–„æ™‚å…‰" : "ç¾åœ¨ä¸æ˜¯å‹å–„æ™‚å…‰"}
              </h1>
              {result.isFriendly && result.discount && (
                <p className="status-discount-text">{result.discount}</p>
              )}
            </div>
          );
        }, [selectedStoreId, currentTime]); // ç•¶ selectedStoreId æˆ– currentTime æ”¹è®Šæ™‚é‡æ–°è¨ˆç®—

        // è¨ˆç®—å‹å–„æ™‚å…‰çµæœï¼ˆç”¨æ–¼æ¢ä»¶æ¸²æŸ“åº«å­˜æŒ‰éˆ•ï¼‰
        const friendlyTimeResult = React.useMemo(() => {
          if (!selectedStoreId) return { isFriendly: false };
          const storeConfig = FRIENDLY_TIME_CONFIG[selectedStoreId];
          return isFriendlyTime(currentTime, storeConfig);
        }, [selectedStoreId, currentTime]);

        // åº«å­˜æŒ‰éˆ•é»æ“Šè™•ç†å‡½æ•¸ - ç›´æ¥è§¸ç™¼ä½ç½®æœå°‹
        const handleInventoryClick = () => {
          // ç›´æ¥èª¿ç”¨ä½ç½®æœå°‹åŠŸèƒ½
          if (typeof UIManager !== 'undefined' && typeof UIManager.handleLocationSearch === 'function') {
            UIManager.handleLocationSearch();
          } else {
            console.error('UIManager å°šæœªåˆå§‹åŒ–æˆ– handleLocationSearch å‡½æ•¸ä¸å­˜åœ¨');
          }
        };

        // å¤šå•†å“è¼¸å…¥æ¸…å–®ï¼ˆåªä¿ç•™åƒ¹éŒ¢ï¼‰
        const [items, setItems] = React.useState([{ price: "" }]);
        // å–å¾—ç›®å‰æŠ˜æ‰£å€ç‡ï¼ˆå¦‚ 65æŠ˜=0.65ï¼Œ7æŠ˜=0.7ï¼Œ8æŠ˜=0.8ï¼‰ï¼Œè‹¥éå‹å–„æ™‚å…‰å‰‡ç‚º1
        const currentDiscountRate = React.useMemo(() => {
          if (!selectedStoreId) return 1;
          const storeConfig = FRIENDLY_TIME_CONFIG[selectedStoreId];
          const result = isFriendlyTime(currentTime, storeConfig);
          if (!result.isFriendly || !result.discount) return 1;
          // è§£ææŠ˜æ‰£å­—ä¸²ï¼ˆå¦‚65æŠ˜ã€7æŠ˜ã€8æŠ˜ï¼‰
          const match = result.discount.match(/(\d+)(?:\.(\d+))?æŠ˜/);
          if (match) {
            const num = parseFloat(match[1] + (match[2] ? "." + match[2] : ""));
            // 1~10æŠ˜éƒ½è¦–ç‚º0.1~1.0ï¼Œå…¶é¤˜è¦–ç‚ºç™¾åˆ†æ¯”
            if (num <= 10) {
              return num / 10;
            } else {
              return num / 100;
            }
          }
          return 1;
        }, [selectedStoreId, currentTime]);

        // æ¯å€‹å•†å“çš„æŠ˜æ‰£å¾Œé‡‘é¡ï¼ˆéå‹å–„æ™‚å…‰æ™‚é¡¯ç¤ºåŸåƒ¹ï¼‰
        const discountedItems = React.useMemo(
          () =>
            items.map((item) => {
              const p = parseFloat(item.price);
              if (isNaN(p) || p <= 0) return "";
              return (
                p * (currentDiscountRate !== 1 ? currentDiscountRate : 1)
              ).toFixed(0);
            }),
          [items, currentDiscountRate]
        );

        // ç¸½åƒ¹ï¼ˆéå‹å–„æ™‚å…‰æ™‚ç‚ºåŸåƒ¹ç¸½å’Œï¼‰
        const totalDiscounted = React.useMemo(() => {
          return discountedItems.reduce(
            (sum, val) => sum + (parseInt(val) || 0),
            0
          );
        }, [discountedItems]);

        // æ ¹æ“šé¸ä¸­çš„åº—å®¶ç²å–èƒŒæ™¯ LOGO åœ–ç‰‡
        const cardBackgroundLogo = selectedStoreId
          ? `url(${FRIENDLY_TIME_CONFIG[selectedStoreId].logo})`
          : "none";

        // æ ¹æ“š selectedStoreId æ±ºå®š app-card-container çš„ class
        const appCardClasses = `app-card-container ${
          selectedStoreId !== null ? "selected-state" : ""
        }`;

        return (
          <>
            {/* ä¸»å¡ç‰‡å®¹å™¨ */}
            <div
              className={appCardClasses}
              style={{ backgroundImage: cardBackgroundLogo }}
            >
              {/* å³ä¸Šè§’æ™‚é–“é¡¯ç¤º */}
              <div className="current-time-display">{formattedTime}</div>

              {selectedStoreId === null && (
                // åˆå§‹ç‹€æ…‹ï¼šé¡¯ç¤ºå…©å€‹å¤§ LOGO
                <div className="logo-container">
                  {/* å°ä¸ƒ LOGO */}
                  <div
                    className="logo-wrapper"
                    onClick={() =>
                      handleLogoClick(FRIENDLY_TIME_CONFIG.sevenEleven.id)
                    }
                  >
                    <img
                      src={FRIENDLY_TIME_CONFIG.sevenEleven.logo}
                      alt="7-ELEVEN Logo"
                      onerror="this.onerror=null; this.src='https://placehold.co/250x100/CCCCCC/333333?text=7-ELEVEN';"
                    />
                  </div>

                  {/* å…¨å®¶ LOGO */}
                  <div
                    className="logo-wrapper"
                    onClick={() =>
                      handleLogoClick(FRIENDLY_TIME_CONFIG.familyMart.id)
                    }
                  >
                    <img
                      src={FRIENDLY_TIME_CONFIG.familyMart.logo}
                      alt="FamilyMart Logo"
                      onerror="this.onerror=null; this.src='https://placehold.co/250x100/CCCCCC/333333?text=FamilyMart';"
                    />
                  </div>
                </div>
              )}
            </div>

            {/* å‹å–„æ™‚å…‰ç‹€æ…‹èˆ‡æŠ˜æ‰£é¡¯ç¤º - ä½æ–¼ä¸»å¡ç‰‡ä¸‹æ–¹ï¼Œä¸”åªæœ‰åœ¨é¸å–åº—å®¶å¾Œæ‰é¡¯ç¤º */}
            {selectedStoreId !== null && (
              <div className="status-display-outer-container">
                {renderStatusContent}{" "}
                {/* ä½¿ç”¨ renderStatusContent è€Œä¸æ˜¯ renderStatusDisplay */}
                {/* å‹å–„æ™‚å…‰å€’æ•¸æç¤º */}
                <div
                  style={{
                    marginTop: 8,
                    color: "#007bff",
                    fontSize: "1em",
                    fontWeight: 500,
                  }}
                >
                  {getFriendlyTimeNotice()}
                </div>

                {/* åº«å­˜æŸ¥è©¢æŒ‰éˆ• - åªåœ¨å‹å–„æ™‚å…‰é¡¯ç¤º */}
                {friendlyTimeResult.isFriendly && (
                  <button
                    className="inventory-button appear"
                    onClick={handleInventoryClick}
                    aria-label="æŸ¥çœ‹é™„è¿‘é–€å¸‚åº«å­˜"
                  >
                    <span role="img" aria-label="package">ğŸ“¦</span>
                    æŸ¥çœ‹é™„è¿‘é–€å¸‚åº«å­˜
                  </button>
                )}

                {/* å¤šå•†å“æ¸…å–®è¼¸å…¥å€å¡Š */}
                <div style={{ marginTop: 20, width: "100%" }}>
                  <div
                    style={{
                      display: "flex",
                      fontWeight: "bold",
                      marginBottom: 6,
                    }}
                  >
                    <div style={{ flex: 1 }}>åŸåƒ¹</div>
                    <div style={{ flex: 1 }}></div>
                    <div style={{ width: 32 }}></div>
                  </div>
                  {items.map((item, idx) => (
                    <div
                      key={idx}
                      style={{
                        display: "flex",
                        alignItems: "center",
                        marginBottom: 6,
                      }}
                    >
                      <input
                        type="text"
                        inputMode="decimal"
                        pattern="[0-9]*"
                        value={item.price}
                        onChange={(e) => {
                          const newItems = [...items];
                          newItems[idx].price = e.target.value.replace(
                            /[^\d.]/g,
                            ""
                          );
                          setItems(newItems);
                        }}
                        placeholder="åŸåƒ¹"
                        style={{
                          flex: 1,
                          marginRight: 6,
                          padding: "6px 8px",
                          fontSize: "1em",
                          borderRadius: 6,
                          border: "1px solid #ccc",
                        }}
                      />
                      <div
                        style={{
                          flex: 1,
                          color: currentDiscountRate !== 1 ? "#28a745" : "#888",
                          fontWeight: "bold",
                        }}
                      >
                        {item.price
                          ? currentDiscountRate !== 1
                            ? discountedItems[idx] + " å…ƒ"
                            : "ç„¡æŠ˜æ‰£"
                          : ""}
                      </div>
                      <button
                        type="button"
                        onClick={() =>
                          setItems(items.filter((_, i) => i !== idx))
                        }
                        style={{
                          marginLeft: 4,
                          background: "#eee",
                          border: "none",
                          borderRadius: 4,
                          cursor: "pointer",
                          fontSize: "1.1em",
                          padding: "2px 8px",
                        }}
                        disabled={items.length === 1}
                        title="åˆªé™¤æ­¤å•†å“"
                      >
                        Ã—
                      </button>
                    </div>
                  ))}
                  <button
                    type="button"
                    onClick={() => setItems([...items, { price: "" }])}
                    style={{
                      marginTop: 8,
                      padding: "6px 16px",
                      fontSize: "1em",
                      borderRadius: 6,
                      border: "1px solid #007bff",
                      background: "#fff",
                      color: "#007bff",
                      cursor: items[items.length - 1].price
                        ? "pointer"
                        : "not-allowed",
                      opacity: items[items.length - 1].price ? 1 : 0.5,
                    }}
                    disabled={!items[items.length - 1].price}
                  >
                    æ–°å¢å•†å“
                  </button>
                  {/* ç¸½è¨ˆé¡¯ç¤º */}
                  <div
                    style={{
                      marginTop: 16,
                      fontSize: "1.2em",
                      fontWeight: "bold",
                      color: "#28a745",
                    }}
                  >
                    {items.some((i) => i.price)
                      ? currentDiscountRate !== 1
                        ? `æŠ˜æ‰£å¾Œç¸½åƒ¹ï¼š${totalDiscounted} å…ƒ`
                        : `ç¸½åƒ¹ï¼š${totalDiscounted} å…ƒ`
                      : ""}
                  </div>
                </div>
              </div>
            )}

            {/* åˆ‡æ› LOGO å€å¡Š - ä½æ–¼ç‹€æ…‹é¡¯ç¤ºå€å¡Šä¸‹æ–¹ï¼Œä¸”åªæœ‰åœ¨é¸å–åº—å®¶å¾Œæ‰é¡¯ç¤º */}
            {selectedStoreId !== null && (
              <div className="switch-logo-container-outer">
                {selectedStoreId === FRIENDLY_TIME_CONFIG.sevenEleven.id ? (
                  // å¦‚æœç•¶å‰æ˜¯å°ä¸ƒï¼Œé¡¯ç¤ºå…¨å®¶æ©«å‘ LOGO
                  <div
                    className="switch-logo-wrapper"
                    onClick={() =>
                      handleLogoClick(FRIENDLY_TIME_CONFIG.familyMart.id)
                    }
                  >
                    <img
                      src={FRIENDLY_TIME_CONFIG.familyMart.horizontalLogo}
                      alt="åˆ‡æ›è‡³å…¨å®¶"
                      onerror="this.onerror=null; this.src='https://placehold.co/180x35/CCCCCC/333333?text=FamilyMart-Horizontal';"
                    />
                    <span className="switch-logo-text">åˆ‡æ›è‡³å…¨å®¶</span>
                  </div>
                ) : (
                  // å¦‚æœç•¶å‰æ˜¯å…¨å®¶ï¼Œé¡¯ç¤ºå°ä¸ƒæ©«å‘ LOGO
                  <div
                    className="switch-logo-wrapper"
                    onClick={() =>
                      handleLogoClick(FRIENDLY_TIME_CONFIG.sevenEleven.id)
                    }
                  >
                    <img
                      src={FRIENDLY_TIME_CONFIG.sevenEleven.horizontalLogo}
                      alt="åˆ‡æ›è‡³7-ELEVEN"
                      onerror="this.onerror=null; this.src='https://placehold.co/180x35/CCCCCC/333333?text=7-ELEVEN-Horizontal';"
                    />
                    <span className="switch-logo-text">åˆ‡æ›è‡³å°ä¸ƒ</span>
                  </div>
                )}
              </div>
            )}
          </>
        );
      }

      // å°‡ App çµ„ä»¶æ¸²æŸ“åˆ° DOM ä¸­çš„ #root å…ƒç´ 
      // ä½¿ç”¨ window.onload ç¢ºä¿ DOM å®Œå…¨è¼‰å…¥å¾Œå†æ¸²æŸ“ React æ‡‰ç”¨
      window.onload = function () {
        try {
          ReactDOM.createRoot(document.getElementById("root")).render(<App />);

          // åˆå§‹åŒ– UIManagerï¼ˆä½ç½®æœå°‹åŠŸèƒ½ï¼‰
          if (typeof UIManager !== 'undefined' && typeof UIManager.init === 'function') {
            UIManager.init();
          }
        } catch (error) {
          console.error("Error rendering React app:", error);
          // æ‡‰ç”¨ç¨‹å¼è¼‰å…¥å¤±æ•—æ™‚ï¼Œåœ¨é é¢é¡¯ç¤ºä¸€å€‹æç¤º
          document.getElementById("root").innerHTML =
            '<p style="color: red; text-align: center; font-size: 1.5em; padding: 20px;">æ‡‰ç”¨ç¨‹å¼è¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç€è¦½å™¨ä¸»æ§å°éŒ¯èª¤ã€‚</p>';
        }
      };
    </script>

    <!-- Frosted Glass Footer -->
    <footer class="frosted-footer">
      <span style="margin: 20px 0">
        å‹å–„æ™‚å…‰æŠ˜æ‰£æŸ¥è©¢å·¥å…· | å…¨å®¶å°ä¸ƒå³æ™‚å„ªæƒ æ™‚æ®µ Â© 2025
      </span>
    </footer>
  </body>
</html>
